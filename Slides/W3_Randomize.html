<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Dr.&nbsp;Lea Hildebrandt">
  <meta name="dcterms.date" content="2024-02-06">
  <title>R Club Würzburg - Randomization and Counterbalancing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Randomization and Counterbalancing</h1>
  <p class="subtitle"></p><div class="line-block">R Coding Club<br>
RTG 2660</div><p></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Lea Hildebrandt 
</div>
</div>
</div>

  <p class="date">2024-02-06</p>
</section>
<section>
<section id="randomization-vs.-counterbalancing" class="title-slide slide level1 center">
<h1>Randomization vs.&nbsp;Counterbalancing</h1>
<div class="cell">
<style type="text/css">
code.sourceCode {
  font-size: 1.4em;
}

div.cell-output-stdout {
  font-size: 1.4em;
}
</style>
</div>
<p><em>. . .</em></p>
<p><em>Randomization/random assignment</em>: Determining completely at random (or pseudorandom) e.g.&nbsp;which condition a participant belongs to/which stimulus is shown… (Block randomization = all conditions occur once before being repeated.)</p>
<p><em>Counterbalancing</em>: Determining how many conditions etc. there are and making sure that all orders are seen by the same number of participants. (This term is often used for within-subjects designs!)</p>
<aside class="notes">
<p>Problem Random: unequal sample sizes (not a problem for LMMs, but should be roughly equal to have good power)</p>
<p>Counterbalanced Randomization: Make list and randomly assign participants to which list to use.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="lets-dive-in-with-an-example" class="slide level2">
<h2>Let’s dive in with an example</h2>
<p>We have three conditions (between-subject) and we want to randomly assign each participant to a condition.</p>
<div class="fragment">
<p>We would use a function called <code>sample()</code>, which will be our best friend for today:<br>
It allows us to draw from a vector (think of drawing a paper slip from a hat), either with or without replacement.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># good practice to set a seed to make the (pseudo-)randomization reproducible </span></span>
<span id="cb1-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a><span class="co"># just shuffle</span></span>
<span id="cb1-5"><a></a><span class="co"># you could also use this to create different stimulus-lists!</span></span>
<span id="cb1-6"><a></a>conds <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"condition A"</span>, <span class="st">"condition B"</span>, <span class="st">"condition C"</span>))</span>
<span id="cb1-7"><a></a>conds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "condition C" "condition A" "condition B"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="co"># draw them repeatedly (with equal probability)</span></span>
<span id="cb3-2"><a></a>conds2 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"condition A"</span>, <span class="st">"condition B"</span>, <span class="st">"condition C"</span>), <span class="dv">30</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a></a>conds2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "condition B" "condition C" "condition B" "condition B" "condition B"
 [6] "condition C" "condition A" "condition B" "condition B" "condition A"
[11] "condition B" "condition C" "condition A" "condition C" "condition C"
[16] "condition A" "condition A" "condition A" "condition A" "condition C"
[21] "condition B" "condition C" "condition B" "condition A" "condition B"
[26] "condition C" "condition B" "condition A" "condition C" "condition C"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">table</span>(conds2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>conds2
condition A condition B condition C 
          9          11          10 </code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>The latter would be ~ random assignment. If we want equal group sizes, we could use a vector of length = sample size and shuffle it (sample without replacement):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>conds <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"condition A"</span>, <span class="st">"condition B"</span>, <span class="st">"condition C"</span>), <span class="at">times=</span><span class="dv">10</span>))</span>
<span id="cb7-2"><a></a><span class="co"># conds</span></span>
<span id="cb7-3"><a></a><span class="fu">table</span>(conds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>conds
condition A condition B condition C 
         10          10          10 </code></pre>
</div>
</div>
<p>Add to dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a></a></span>
<span id="cb9-3"><a></a>design <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb9-4"><a></a>  <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>,</span>
<span id="cb9-5"><a></a>  <span class="at">cond =</span> <span class="fu">sample</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"condition A"</span>, <span class="st">"condition B"</span>, <span class="st">"condition C"</span>), <span class="at">times=</span><span class="dv">10</span>))</span>
<span id="cb9-6"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="two-conditions" class="slide level2">
<h2>Two conditions</h2>
<p>We can draw them separately:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>treatment <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Treatment"</span>, <span class="st">"Control"</span>)</span>
<span id="cb10-2"><a></a>color <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"yellow"</span>)</span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a>design <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb10-5"><a></a>  <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>,</span>
<span id="cb10-6"><a></a>  <span class="at">cond =</span> <span class="fu">sample</span>(<span class="fu">rep</span>(treatment, <span class="at">times=</span><span class="dv">20</span>)),</span>
<span id="cb10-7"><a></a>  <span class="at">color =</span> <span class="fu">sample</span>(<span class="fu">rep</span>(color, <span class="at">times=</span><span class="dv">20</span>))</span>
<span id="cb10-8"><a></a>)</span>
<span id="cb10-9"><a></a></span>
<span id="cb10-10"><a></a><span class="fu">table</span>(design<span class="sc">$</span>cond, design<span class="sc">$</span>color) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           
            blue yellow
  Control      9     11
  Treatment   11      9</code></pre>
</div>
</div>
<div class="fragment">
<p>…or make sure that every combination is equally often represented:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="1|2-3|4|5|6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>design <span class="ot">&lt;-</span> <span class="fu">crossing</span>(treatment, color) <span class="sc">%&gt;%</span> <span class="co"># gets all combinations</span></span>
<span id="cb12-2"><a></a>  <span class="fu">mutate</span>(<span class="at">combi=</span><span class="fu">str_c</span>(treatment, color, <span class="at">sep=</span><span class="st">"_"</span>)) <span class="sc">%&gt;%</span>  <span class="co"># combine columns</span></span>
<span id="cb12-3"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>treatment, <span class="sc">-</span>color) <span class="sc">%&gt;%</span>   <span class="co"># remove original ones</span></span>
<span id="cb12-4"><a></a>  <span class="fu">reframe</span>(<span class="at">combi2 =</span> <span class="fu">sample</span>(<span class="fu">rep</span>(combi, <span class="dv">10</span>))) <span class="sc">%&gt;%</span>  <span class="co"># use reframe to add rows</span></span>
<span id="cb12-5"><a></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span>  <span class="co"># add participant number</span></span>
<span id="cb12-6"><a></a>  <span class="fu">separate_wider_delim</span>(combi2, <span class="at">delim=</span><span class="st">"_"</span>, <span class="at">names=</span><span class="fu">c</span>(<span class="st">"treatment"</span>, <span class="st">"color"</span>))</span>
<span id="cb12-7"><a></a></span>
<span id="cb12-8"><a></a><span class="fu">table</span>(design<span class="sc">$</span>treatment, design<span class="sc">$</span>color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           
            blue yellow
  Control     10     10
  Treatment   10     10</code></pre>
</div>
</div>
</div>
</section>
<section id="draw-from-a-probability-distribution" class="slide level2">
<h2>Draw from a probability distribution</h2>
<p>Sometimes it can be helpful to draw a random number from a certain probability distribution, e.g.&nbsp;if you want to get Inter-Trial-Intervals from a normal or uniform distribution or if you want to simulate a coin toss with a binomial distribution.</p>
<p>In R, you can use certain functions that start with an “r” (e.g.&nbsp;<code>rnorm()</code>, <code>runif()</code>, <code>rbinom()</code>) to draw random numbers from distributions.</p>
<div class="fragment">
<p>Let’s start with the coin toss, as it is similar to using <code>sample()</code>. The binomial distribution gives you the “successes” (vs.&nbsp;failure, so 1 vs.&nbsp;0 or heads vs.&nbsp;tails) in a row of “experiments” (coin tosses).</p>
<p>You could of course determine the condition by “tossing a coin”. The “problem” is that the count of each outcome will be different for each participant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="co"># repeat a study 10 times in which 100 fair coins are tossed -out of the 100, how often do we get heads?</span></span>
<span id="cb14-2"><a></a><span class="fu">rbinom</span>(<span class="dv">10</span>,<span class="dv">100</span>,.<span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 51 41 51 44 43 46 43 48 51 41</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="co"># For one participant, determine whether 10 trials are condition 0 or 1 (with 60% probability for cond. 1)</span></span>
<span id="cb16-2"><a></a><span class="fu">rbinom</span>(<span class="dv">10</span>,<span class="dv">1</span>,.<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 0 1 1 0 1 1 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Let’s draw 10 jittered ITIs from a normal distribution: We want them to be jittered around a mean of 1500 msec with a SD of 200 msec:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">1500</span>, <span class="at">sd =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1387.146 1694.062 1496.273 1572.474 1902.261 1264.407 1348.966 1433.743
 [9] 1443.259 1562.831</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="co"># you could also round them:</span></span>
<span id="cb20-2"><a></a><span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">1500</span>, <span class="dv">200</span>), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1869 1304 1939 1459 1695 1326 1400 1657 1080 1492</code></pre>
</div>
</div>
<p>You could use the uniform distribution if you want each number to be equally likely:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="co"># get 10 numbers between 1200 and 1800 msec</span></span>
<span id="cb22-2"><a></a><span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">10</span>, <span class="at">min =</span> <span class="dv">1200</span>, <span class="at">max =</span> <span class="dv">1800</span>), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1406 1720 1473 1520 1778 1665 1325 1385 1783 1551</code></pre>
</div>
</div>
</div>
</section>
<section id="any-other-questions" class="slide level2">
<h2>Any other questions?</h2>
<p>Specific to your design etc.?</p>
</section>
<section id="ecems-study---detour-incl.-loops-and-if-statements" class="slide level2">
<h2>Ecem’s study - detour incl.&nbsp;loops and if-statements!</h2>
<ul>
<li><p>Shape (4x) and color (4x)</p></li>
<li><p>each participant (N=<del>16</del> 4) should have four stimuli assigned, each color and each shape once</p></li>
<li><p>but each of the stimuli should be used equally often (= once)!</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>shape <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"s1"</span>, <span class="st">"s2"</span>, <span class="st">"s3"</span>, <span class="st">"s4"</span>)</span>
<span id="cb24-2"><a></a>color <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"c1"</span>, <span class="st">"c2"</span>, <span class="st">"c3"</span>, <span class="st">"c4"</span>)</span>
<span id="cb24-3"><a></a></span>
<span id="cb24-4"><a></a><span class="fu">crossing</span>(shape, color)  <span class="co"># 16 combinations</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
   shape color
   &lt;chr&gt; &lt;chr&gt;
 1 s1    c1   
 2 s1    c2   
 3 s1    c3   
 4 s1    c4   
 5 s2    c1   
 6 s2    c2   
 7 s2    c3   
 8 s2    c4   
 9 s3    c1   
10 s3    c2   
11 s3    c3   
12 s3    c4   
13 s4    c1   
14 s4    c2   
15 s4    c3   
16 s4    c4   </code></pre>
</div>
</div>
<p>If we simply draw from this list, a participant likely has a shape/color twice. If we draw from both lists separately, we can’t make sure that another participant won’t get the same combination! (If we just draw stimuli completely at random, this would be fine…)</p>
<div class="fragment">
<p><strong>Task: In small groups, try to solve this problem in pseudo-code (break it down in small steps and write down what should happen in each step). (10 min.!)</strong></p>
</div>
</section>
<section id="get-stimulus-list" class="slide level2">
<h2>Get stimulus list</h2>
<p>We could “brute-force” it: Draw a stimulus and compare it to the already drawn ones. If already included, discard and draw next one etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="co"># participant 1</span></span>
<span id="cb26-2"><a></a>stimlist1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb26-3"><a></a>  <span class="at">ID =</span> <span class="dv">1</span>, </span>
<span id="cb26-4"><a></a>  <span class="at">stim_shape =</span> <span class="fu">sample</span>(shape),</span>
<span id="cb26-5"><a></a>  <span class="at">stim_col =</span> <span class="fu">sample</span>(color)</span>
<span id="cb26-6"><a></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a></a>  <span class="fu">mutate</span>(<span class="at">combi=</span><span class="fu">str_c</span>(stim_shape, stim_col, <span class="at">sep=</span><span class="st">"_"</span>))   <span class="co"># combine columns</span></span>
<span id="cb26-8"><a></a>  </span>
<span id="cb26-9"><a></a><span class="co"># participant 2</span></span>
<span id="cb26-10"><a></a>stimlist2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb26-11"><a></a>  <span class="at">ID =</span> <span class="dv">2</span>, </span>
<span id="cb26-12"><a></a>  <span class="at">stim_shape =</span> <span class="fu">sample</span>(shape),</span>
<span id="cb26-13"><a></a>  <span class="at">stim_col =</span> <span class="fu">sample</span>(color)</span>
<span id="cb26-14"><a></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-15"><a></a>  <span class="fu">mutate</span>(<span class="at">combi=</span><span class="fu">str_c</span>(stim_shape, stim_col, <span class="at">sep=</span><span class="st">"_"</span>))   <span class="co"># combine columns</span></span>
<span id="cb26-16"><a></a></span>
<span id="cb26-17"><a></a><span class="co"># check whether stimuli are the same in both stimlists</span></span>
<span id="cb26-18"><a></a><span class="co"># you could use %in% (not "==" -&gt; would only check rowwise!) or setdiff()</span></span>
<span id="cb26-19"><a></a></span>
<span id="cb26-20"><a></a>stimlist1<span class="sc">$</span>combi <span class="sc">%in%</span> stimlist2<span class="sc">$</span>combi <span class="co"># checks whether any of stimlist 2 is in stimlist 1 -&gt; should be 4x FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">setdiff</span>(stimlist2<span class="sc">$</span>combi, stimlist1<span class="sc">$</span>combi) <span class="co"># gives you the ones that are different in stimlist2 -&gt; should be 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "s3_c3" "s4_c4" "s1_c2" "s2_c1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">any</span>(stimlist1<span class="sc">$</span>combi <span class="sc">%in%</span> stimlist2<span class="sc">$</span>combi) <span class="co"># test whether any of the 4 is TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="run-repeatedly-until-novel-list-is-found" class="slide level2 scrollable">
<h2>Run repeatedly until “novel” list is found</h2>
<p>We will use a <code>while statement</code><sup>1</sup> in combination with an <code>if statement</code> for this!</p>
<p>The <code>while statement</code> will run the code until the condition in the if statement is met and then break out of the while loop.</p>
<p>The <code>if statement</code> tests a condition. Only if the condition is met, the code underneath is carried out. It is also possible to use alternative conditions: <code>if(...) {...} elseif() {...} else {...}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="co"># check repeatedly</span></span>
<span id="cb32-2"><a></a><span class="cf">while</span>(<span class="cn">TRUE</span>) {</span>
<span id="cb32-3"><a></a>  stimlist2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-4"><a></a>  <span class="at">ID =</span> <span class="dv">2</span>, </span>
<span id="cb32-5"><a></a>  <span class="at">stim_shape =</span> <span class="fu">sample</span>(shape),</span>
<span id="cb32-6"><a></a>  <span class="at">stim_col =</span> <span class="fu">sample</span>(color)</span>
<span id="cb32-7"><a></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-8"><a></a>  <span class="fu">mutate</span>(<span class="at">combi=</span><span class="fu">str_c</span>(stim_shape, stim_col, <span class="at">sep=</span><span class="st">"_"</span>))   <span class="co"># combine columns</span></span>
<span id="cb32-9"><a></a>  </span>
<span id="cb32-10"><a></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">any</span>(stimlist1<span class="sc">$</span>combi <span class="sc">%in%</span> stimlist2<span class="sc">$</span>combi)){</span>
<span id="cb32-11"><a></a>    <span class="cf">break</span>;</span>
<span id="cb32-12"><a></a>  }</span>
<span id="cb32-13"><a></a>}</span>
<span id="cb32-14"><a></a></span>
<span id="cb32-15"><a></a><span class="co"># we could also use:</span></span>
<span id="cb32-16"><a></a><span class="co"># test &lt;- TRUE</span></span>
<span id="cb32-17"><a></a><span class="co"># while(test == TRUE) {</span></span>
<span id="cb32-18"><a></a><span class="co">#   ...</span></span>
<span id="cb32-19"><a></a><span class="co">#   if(...)</span></span>
<span id="cb32-20"><a></a><span class="co">#     test &lt;- FALSE}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Rarely used in tidyverse, but often used in base R/other programming languages!</p></li></ol></aside></section>
<section id="repeat-for-more-participants" class="slide level2">
<h2>Repeat for more participants</h2>
<p>We could copy the code for every participant, but this would be tedious and would result in a long script. Alternatively, we can use a <code>for-loop</code>! It is similar to the while statement and runs the included code a specified number of times:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" data-code-line-numbers="1-4|5-12|14|16,24|17-21|23|28-29|43-48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="co"># initiate variables and dataframes (fill in with values later)</span></span>
<span id="cb33-2"><a></a>n <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="co"># easily change number of subjects here - max 4 possible w/16 combis!</span></span>
<span id="cb33-3"><a></a>shape <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"heart"</span>, <span class="st">"sacral"</span>, <span class="st">"throat"</span>, <span class="st">"solar"</span>) <span class="co"># or "s1" etc</span></span>
<span id="cb33-4"><a></a>color <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"yellow"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>, <span class="st">"blue"</span>) <span class="co"># or "c1" etc</span></span>
<span id="cb33-5"><a></a></span>
<span id="cb33-6"><a></a><span class="co"># initiate "empty" tibble to fill in for-loop</span></span>
<span id="cb33-7"><a></a>overall_stimlist <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb33-8"><a></a>  <span class="at">ID =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">4</span><span class="sc">*</span>n), <span class="co"># fill in NAs, 4 rows per participant</span></span>
<span id="cb33-9"><a></a>  <span class="at">stim_shape =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">4</span><span class="sc">*</span>n),</span>
<span id="cb33-10"><a></a>  <span class="at">stim_col =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">4</span><span class="sc">*</span>n),</span>
<span id="cb33-11"><a></a>  <span class="at">combi =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">4</span><span class="sc">*</span>n)</span>
<span id="cb33-12"><a></a>)</span>
<span id="cb33-13"><a></a></span>
<span id="cb33-14"><a></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n){</span>
<span id="cb33-15"><a></a>  </span>
<span id="cb33-16"><a></a>  <span class="cf">while</span>(<span class="cn">TRUE</span>) {</span>
<span id="cb33-17"><a></a>  stimlist2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb33-18"><a></a>    <span class="at">ID =</span> i,   <span class="co"># use the index of the loop iteration!</span></span>
<span id="cb33-19"><a></a>    <span class="at">stim_shape =</span> <span class="fu">sample</span>(shape),</span>
<span id="cb33-20"><a></a>    <span class="at">stim_col =</span> <span class="fu">sample</span>(color)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-21"><a></a>    <span class="fu">mutate</span>(<span class="at">combi=</span><span class="fu">str_c</span>(stim_shape, stim_col, <span class="at">sep=</span><span class="st">"_"</span>))   <span class="co"># combine columns</span></span>
<span id="cb33-22"><a></a>  </span>
<span id="cb33-23"><a></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">any</span>(overall_stimlist<span class="sc">$</span>combi <span class="sc">%in%</span> stimlist2<span class="sc">$</span>combi)){</span>
<span id="cb33-24"><a></a>      <span class="cf">break</span>;</span>
<span id="cb33-25"><a></a>    }</span>
<span id="cb33-26"><a></a>  }</span>
<span id="cb33-27"><a></a>  </span>
<span id="cb33-28"><a></a>   <span class="co"># save to overall_stimlist at correct location</span></span>
<span id="cb33-29"><a></a>  overall_stimlist[(<span class="dv">4</span><span class="sc">*</span>i<span class="dv">-3</span>)<span class="sc">:</span>(<span class="dv">4</span><span class="sc">*</span>i), ] <span class="ot">&lt;-</span> stimlist2</span>
<span id="cb33-30"><a></a>  </span>
<span id="cb33-31"><a></a>  </span>
<span id="cb33-32"><a></a>  <span class="co"># Ecem also wants to shuffle each stimlist2 4 times to get different orders - making sure that no stimulus is in the same location!</span></span>
<span id="cb33-33"><a></a>  <span class="co"># we can get all permutations (using an R function like Permn()), but this would be 24 variations (incl. same stimulus in same location)</span></span>
<span id="cb33-34"><a></a>  <span class="co"># instead, we just manually shift the stimuli by one (e.g. 1st becomes 2nd etc.)</span></span>
<span id="cb33-35"><a></a>  </span>
<span id="cb33-36"><a></a>  <span class="co"># stimlist3 &lt;- stimlist2[c(2,3,4,1),]</span></span>
<span id="cb33-37"><a></a>  <span class="co"># stimlist4 &lt;- stimlist2[c(3,4,1,2),]</span></span>
<span id="cb33-38"><a></a>  <span class="co"># stimlist5 &lt;- stimlist2[c(4,1,2,3),]</span></span>
<span id="cb33-39"><a></a> </span>
<span id="cb33-40"><a></a>  </span>
<span id="cb33-41"><a></a>}</span>
<span id="cb33-42"><a></a></span>
<span id="cb33-43"><a></a><span class="co"># add further info to the dataframe</span></span>
<span id="cb33-44"><a></a>overall_stimlist <span class="ot">&lt;-</span> overall_stimlist <span class="sc">%&gt;%</span> </span>
<span id="cb33-45"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-46"><a></a>    <span class="at">CS_type =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"threat"</span>, <span class="st">"safety"</span>, <span class="st">"amb1"</span>, <span class="st">"amb2"</span>), <span class="at">times=</span>n),</span>
<span id="cb33-47"><a></a>    <span class="at">percentage =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">50</span>), <span class="at">times=</span>n)</span>
<span id="cb33-48"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Ecem’s study, it is more complex and she already made stimulus lists per hand! I would actually just use this list and read it into R (in a good format).</p>
</section>
<section id="make-the-trial-list-per-participant" class="slide level2">
<h2>Make the trial list per participant</h2>
<p>Now that we know which stimulus is used for which category for each participant, we can generate the stimulus list. In Ecem’s study, we have 2 blocks à 100 trials (after the first block, the stimulus type changes). Let’s focus on the first block.</p>
<p>We have different trial types: 60 single and 40 multi cue. For the single cues, each of the 4 stimulus types is shown 15x, for the multicue, a combination of two types (threat or safety with each amb) is shown 10x. In the multi cue trials, other stimuli are also shown, which are the other combinations of shape and color.</p>
<p><strong>Task: How can we make an individual trial list per subject? (2 min.)</strong></p>
<div class="fragment">
<p>We first simply list all possibilities and repeat them as often as needed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>trial_list <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(  <span class="co"># wrap in sample()!</span></span>
<span id="cb34-2"><a></a>                       <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"threat"</span>,<span class="st">"safety"</span>,<span class="st">"amb1"</span>,<span class="st">"amb2"</span>), <span class="dv">15</span>),</span>
<span id="cb34-3"><a></a>                       <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"threat-amb1"</span>,<span class="st">"threat-amb2"</span>,<span class="st">"safety-amb1"</span>,<span class="st">"safety-amb2"</span>), <span class="dv">10</span>)</span>
<span id="cb34-4"><a></a>                       ))</span>
<span id="cb34-5"><a></a></span>
<span id="cb34-6"><a></a><span class="fu">length</span>(trial_list)  <span class="co"># make sure it's 100!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>trial_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "amb1"        "threat-amb1" "threat"      "amb2"        "threat-amb2"
  [6] "safety-amb2" "safety-amb2" "threat"      "safety-amb2" "threat"     
 [11] "threat"      "safety-amb2" "safety"      "threat"      "amb2"       
 [16] "amb2"        "safety-amb1" "amb1"        "threat"      "amb1"       
 [21] "amb1"        "safety"      "threat-amb1" "amb2"        "threat-amb2"
 [26] "amb2"        "threat-amb1" "threat"      "safety-amb1" "threat-amb1"
 [31] "safety"      "amb2"        "safety-amb1" "threat"      "threat"     
 [36] "safety"      "safety-amb2" "amb1"        "threat"      "safety"     
 [41] "threat"      "threat-amb1" "amb2"        "safety"      "safety-amb1"
 [46] "safety"      "amb1"        "threat"      "amb2"        "safety-amb1"
 [51] "safety-amb1" "threat-amb2" "threat-amb1" "safety-amb2" "amb1"       
 [56] "safety-amb1" "safety-amb1" "threat"      "amb1"        "threat-amb2"
 [61] "safety"      "safety"      "amb2"        "threat-amb1" "safety-amb2"
 [66] "amb2"        "safety"      "threat-amb1" "safety-amb1" "amb2"       
 [71] "amb2"        "amb2"        "safety-amb2" "amb1"        "amb1"       
 [76] "threat-amb1" "threat-amb1" "safety-amb2" "safety"      "amb1"       
 [81] "threat-amb2" "safety"      "safety"      "safety"      "safety-amb1"
 [86] "safety-amb2" "amb1"        "amb1"        "threat-amb2" "amb1"       
 [91] "threat"      "threat"      "amb2"        "safety"      "threat-amb2"
 [96] "amb2"        "amb1"        "threat-amb2" "threat-amb2" "threat-amb2"</code></pre>
</div>
</div>
</div>
</section>
<section id="minimum-distance-same-stimulus-types" class="slide level2">
<h2>Minimum distance same stimulus types?</h2>
<p>What if we need a minimum distance between the same stimulus types?</p>
<p>TAKES LONG; DON’T RUN!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>trial_list2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(trial_list))</span>
<span id="cb38-2"><a></a>trial_list2[<span class="dv">1</span>] <span class="ot">&lt;-</span> trial_list[<span class="dv">1</span>] <span class="co"># fill in the first already to have a comparison</span></span>
<span id="cb38-3"><a></a></span>
<span id="cb38-4"><a></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(trial_list)) { <span class="co"># start with 2!</span></span>
<span id="cb38-5"><a></a>  </span>
<span id="cb38-6"><a></a>  <span class="cf">while</span>(trial_list[i] <span class="sc">==</span> trial_list[i<span class="dv">-1</span>]) { <span class="co"># check for last 2: %in% trial_list[i-2:i-1]</span></span>
<span id="cb38-7"><a></a>    trial_list[i<span class="sc">:</span><span class="fu">length</span>(trial_list)] <span class="ot">&lt;-</span> <span class="fu">sample</span>(trial_list[i<span class="sc">:</span><span class="fu">length</span>(trial_list)])</span>
<span id="cb38-8"><a></a>  } </span>
<span id="cb38-9"><a></a>  trial_list2[i] <span class="ot">&lt;-</span> trial_list[i]</span>
<span id="cb38-10"><a></a>  </span>
<span id="cb38-11"><a></a>}</span>
<span id="cb38-12"><a></a></span>
<span id="cb38-13"><a></a><span class="co"># check whether correct</span></span>
<span id="cb38-14"><a></a>trial_list2 <span class="sc">!=</span> <span class="fu">lag</span>(trial_list2) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fill-in-the-remaining-information" class="slide level2">
<h2>Fill in the remaining information</h2>
<p>…for single cue trials!</p>
<p><strong>Tasks: (5 min.)</strong></p>
<ul>
<li><p><strong>How can we get the further stimulus information (color, shape) into this list?</strong></p></li>
<li><p><strong>How can we add the info whether it’s a “sc” or a “mc” trial</strong></p></li>
<li><p><strong>How can we determine whether a shock should be given in each trial?</strong></p></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>triallist_vp1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb39-2"><a></a>  <span class="at">trial =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trial_list),</span>
<span id="cb39-3"><a></a>  <span class="at">block =</span> <span class="dv">1</span>,</span>
<span id="cb39-4"><a></a>  <span class="at">CS_type =</span> trial_list <span class="co"># same name as in stimlist for join!</span></span>
<span id="cb39-5"><a></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a></a>  </span>
<span id="cb39-7"><a></a>  <span class="co"># add info from stimlist</span></span>
<span id="cb39-8"><a></a>  <span class="fu">left_join</span>(overall_stimlist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ID<span class="sc">==</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span>  <span class="co"># change ID! = for-loop</span></span>
<span id="cb39-9"><a></a>  </span>
<span id="cb39-10"><a></a>  <span class="co"># determine whether shock or not (can also use 1 and 0)</span></span>
<span id="cb39-11"><a></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span>   <span class="co"># this is crucial! otherwise it will always be the same value</span></span>
<span id="cb39-12"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-13"><a></a>    <span class="at">trial_type =</span> <span class="fu">ifelse</span>(CS_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"threat"</span>, <span class="st">"safety"</span>, <span class="st">"amb1"</span>, <span class="st">"amb2"</span>), <span class="st">"sc"</span>, <span class="st">"mc"</span>),</span>
<span id="cb39-14"><a></a>    </span>
<span id="cb39-15"><a></a>    <span class="at">shock =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-16"><a></a>      CS_type <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"shock"</span>, </span>
<span id="cb39-17"><a></a>      CS_type <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"noshock"</span>,</span>
<span id="cb39-18"><a></a>      CS_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"amb1"</span>, <span class="st">"amb2"</span>) <span class="sc">~</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"shock"</span>,<span class="st">"noshock"</span>), <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>,.<span class="dv">5</span>))))</span>
<span id="cb39-19"><a></a>     <span class="co"># CS_type %in% c("amb1", "amb2") ~ rbinom(1,1,.5)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Btw: This will lead to shocks being delivered not exactly 50% of the time in the amb1/2 trials –&gt; see above for other solution.</p>
</div>
</section>
<section id="multi-cue-trials" class="slide level2">
<h2>Multi-cue trials?</h2>
<p><strong>Task: Any ideas how we can do the same also for mc trials? (1 min.)</strong></p>
<div class="fragment">
<p>For the multi-cue trials, we could split the name of the stimuli to two columns and do similar things as above with both columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="co"># we start again with the trial_list, code from above</span></span>
<span id="cb40-2"><a></a>triallist_vp1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb40-3"><a></a>  <span class="at">trial =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trial_list),</span>
<span id="cb40-4"><a></a>  <span class="at">block =</span> <span class="dv">1</span>,</span>
<span id="cb40-5"><a></a>  <span class="at">type =</span> trial_list <span class="co"># DIFFERENT name as in stimlist for join! (not neccessary!)</span></span>
<span id="cb40-6"><a></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-7"><a></a>  </span>
<span id="cb40-8"><a></a>  <span class="fu">separate_wider_delim</span>(type, <span class="at">delim=</span><span class="st">"-"</span>, <span class="at">names=</span><span class="fu">c</span>(<span class="st">"CS_type1"</span>, <span class="st">"CS_type2"</span>), <span class="at">cols_remove =</span> <span class="cn">FALSE</span>, <span class="at">too_few =</span> <span class="st">"align_start"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-9"><a></a>  <span class="co"># last argument leads to NAs in 2nd column for SC trials</span></span>
<span id="cb40-10"><a></a>  </span>
<span id="cb40-11"><a></a>   <span class="co"># add info from stimlist</span></span>
<span id="cb40-12"><a></a>  <span class="fu">left_join</span>(., overall_stimlist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ID<span class="sc">==</span><span class="dv">1</span>), <span class="at">by =</span> <span class="fu">join_by</span>(CS_type1 <span class="sc">==</span> CS_type)) <span class="sc">%&gt;%</span>  <span class="co"># change ID! = for-loop</span></span>
<span id="cb40-13"><a></a>  </span>
<span id="cb40-14"><a></a>  <span class="co"># determine whether shock or not (can also use 1 and 0)</span></span>
<span id="cb40-15"><a></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-16"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-17"><a></a>    <span class="at">trial_type =</span> <span class="fu">ifelse</span>(type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"threat"</span>, <span class="st">"safety"</span>, <span class="st">"amb1"</span>, <span class="st">"amb2"</span>), <span class="st">"sc"</span>, <span class="st">"mc"</span>), </span>
<span id="cb40-18"><a></a>    </span>
<span id="cb40-19"><a></a>    <span class="at">shock1 =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-20"><a></a>      CS_type1 <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"shock"</span>, </span>
<span id="cb40-21"><a></a>      CS_type1 <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"noshock"</span>,</span>
<span id="cb40-22"><a></a>      CS_type1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"amb1"</span>, <span class="st">"amb2"</span>) <span class="sc">~</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"shock"</span>,<span class="st">"noshock"</span>), <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>,.<span class="dv">5</span>))),</span>
<span id="cb40-23"><a></a>    </span>
<span id="cb40-24"><a></a>    <span class="at">shock2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-25"><a></a>      CS_type2 <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"shock"</span>, </span>
<span id="cb40-26"><a></a>      CS_type2 <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"noshock"</span>,</span>
<span id="cb40-27"><a></a>      CS_type2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"amb1"</span>, <span class="st">"amb2"</span>) <span class="sc">~</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"shock"</span>,<span class="st">"noshock"</span>), <span class="dv">1</span>)),</span>
<span id="cb40-28"><a></a>    <span class="at">shock =</span> <span class="fu">coalesce</span>(shock2, shock1)) <span class="sc">%&gt;%</span> <span class="co"># uses "shock2" unless there's NA, then shock1</span></span>
<span id="cb40-29"><a></a>    </span>
<span id="cb40-30"><a></a>    <span class="co"># also add shape and color for 2nd stimulus in MC trials - could use ifelse(), case_when() or join again</span></span>
<span id="cb40-31"><a></a>    <span class="fu">left_join</span>(overall_stimlist <span class="sc">%&gt;%</span> </span>
<span id="cb40-32"><a></a>                <span class="fu">filter</span>(ID<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-33"><a></a>                <span class="fu">select</span>(stim_shape, stim_col, combi, CS_type), </span>
<span id="cb40-34"><a></a>              <span class="at">by =</span> <span class="fu">join_by</span>(CS_type2 <span class="sc">==</span> CS_type), <span class="co"># now pick CS_type2</span></span>
<span id="cb40-35"><a></a>              <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"2"</span>))  <span class="co"># adds a 2 for the new columns added </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="more-stimuli" class="slide level2">
<h2>More stimuli!</h2>
<p>In addition, Ecem wants to show 2 more stimuli in the multi-cue trials: The other combinations of shapes and colors, e.g.&nbsp;shape1 with color2 and shape2 with color1. We can easily add this to the dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>triallist_vp1 <span class="ot">&lt;-</span> triallist_vp1 <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a></a>  <span class="co"># mutate(stim_shape3 = ifelse(trial_type == "sc", NA, stim_shape),  # only fill in if MC trial</span></span>
<span id="cb41-3"><a></a>  <span class="co">#        stim_col3 = stim_col2,</span></span>
<span id="cb41-4"><a></a>  <span class="co">#        stim_shape4 = stim_shape2,</span></span>
<span id="cb41-5"><a></a>  <span class="co">#        stim_col4 = ifelse(trial_type == "sc", NA, stim_col))</span></span>
<span id="cb41-6"><a></a>  <span class="fu">mutate</span>(<span class="at">combi3 =</span> <span class="fu">ifelse</span>(trial_type <span class="sc">==</span> <span class="st">"sc"</span>, <span class="cn">NA</span>, <span class="fu">str_c</span>(stim_shape, stim_col2, <span class="at">sep =</span> <span class="st">"_"</span>)),</span>
<span id="cb41-7"><a></a>         <span class="at">combi4 =</span> <span class="fu">ifelse</span>(trial_type <span class="sc">==</span> <span class="st">"sc"</span>, <span class="cn">NA</span>, <span class="fu">str_c</span>(stim_shape2, stim_col, <span class="at">sep =</span> <span class="st">"_"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Ecem also wants to shuffle the four stimuli and show them in a different order on the other side of the screen. Again, there is probably a number of different solutions!</p>
<p>Here, we shuffle the stimulus names from all four “combi”-columns. Because <code>sample()</code> gives out 4 values then but we can only save one within mutate(), we <code>paste</code>/concatenate/<code>str_c()</code> them and separate that string in the next step into four columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>triallist_vp1 <span class="ot">&lt;-</span> triallist_vp1 <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a></a>  <span class="fu">mutate</span>(<span class="at">allcombisshuffled =</span> <span class="fu">str_c</span>(<span class="fu">sample</span>(<span class="fu">c</span>(combi, combi2, combi3, combi4)), <span class="at">collapse =</span> <span class="st">";"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a></a>  <span class="fu">separate_wider_delim</span>(allcombisshuffled, <span class="at">delim =</span> <span class="st">";"</span>, <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"combi5"</span>, <span class="st">"combi6"</span>, <span class="st">"combi7"</span>, <span class="st">"combi8"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="bring-it-all-together-for-all-participants" class="slide level2">
<h2>Bring it all together for all participants</h2>
<p>We can use the <code>overall_stimlist</code> we already made for all (four) participants. We could do the same without the for-loop (just have another column for participant and more rows), but we will use a for loop for now so you can practice it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43" data-code-line-numbers="|1-2|4|5-11|13-17|19-21|23-28|30-41|43|45-47|48|50-51|53-54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>ntrials <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb43-2"><a></a>nsubjects <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb43-3"><a></a></span>
<span id="cb43-4"><a></a><span class="cf">for</span> (s <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>nsubjects) {</span>
<span id="cb43-5"><a></a>  triallist <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb43-6"><a></a>    <span class="at">trial =</span> <span class="dv">1</span><span class="sc">:</span>ntrials,</span>
<span id="cb43-7"><a></a>    <span class="at">block =</span> <span class="dv">1</span>,</span>
<span id="cb43-8"><a></a>    <span class="at">type =</span> <span class="fu">sample</span>(<span class="fu">c</span>( </span>
<span id="cb43-9"><a></a>      <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"threat"</span>,<span class="st">"safety"</span>,<span class="st">"amb1"</span>,<span class="st">"amb2"</span>), <span class="dv">15</span>),</span>
<span id="cb43-10"><a></a>      <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"threat-amb1"</span>,<span class="st">"threat-amb2"</span>,<span class="st">"safety-amb1"</span>,<span class="st">"safety-amb2"</span>), <span class="dv">10</span>)))</span>
<span id="cb43-11"><a></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb43-12"><a></a>    </span>
<span id="cb43-13"><a></a>    <span class="fu">separate_wider_delim</span>(type, </span>
<span id="cb43-14"><a></a>                         <span class="at">delim=</span><span class="st">"-"</span>, </span>
<span id="cb43-15"><a></a>                         <span class="at">names=</span><span class="fu">c</span>(<span class="st">"CS_type1"</span>, <span class="st">"CS_type2"</span>), </span>
<span id="cb43-16"><a></a>                         <span class="at">cols_remove =</span> <span class="cn">FALSE</span>, </span>
<span id="cb43-17"><a></a>                         <span class="at">too_few =</span> <span class="st">"align_start"</span>) <span class="sc">%&gt;%</span> <span class="co"># last argument leads to NAs in 2nd column for SC trials</span></span>
<span id="cb43-18"><a></a>    </span>
<span id="cb43-19"><a></a>    <span class="co"># add info from stimlist</span></span>
<span id="cb43-20"><a></a>    <span class="fu">left_join</span>(overall_stimlist <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ID<span class="sc">==</span>s), <span class="co"># change ID! = for-loop</span></span>
<span id="cb43-21"><a></a>              <span class="at">by =</span> <span class="fu">join_by</span>(CS_type1 <span class="sc">==</span> CS_type)) <span class="sc">%&gt;%</span>  </span>
<span id="cb43-22"><a></a>    </span>
<span id="cb43-23"><a></a>     <span class="co"># also add shape and color for 2nd stimulus in MC trials - could use ifelse(), case_when() or join again</span></span>
<span id="cb43-24"><a></a>    <span class="fu">left_join</span>(overall_stimlist <span class="sc">%&gt;%</span> </span>
<span id="cb43-25"><a></a>                <span class="fu">filter</span>(ID<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-26"><a></a>                <span class="fu">select</span>(stim_shape, stim_col, combi, CS_type), </span>
<span id="cb43-27"><a></a>              <span class="at">by =</span> <span class="fu">join_by</span>(CS_type2 <span class="sc">==</span> CS_type), <span class="co"># now pick CS_type2</span></span>
<span id="cb43-28"><a></a>              <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"2"</span>)) <span class="sc">%&gt;%</span>  <span class="co"># adds a 2 for the new columns added </span></span>
<span id="cb43-29"><a></a>    </span>
<span id="cb43-30"><a></a>    <span class="co"># determine whether shock or not (can also use 1 and 0)</span></span>
<span id="cb43-31"><a></a>    <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-32"><a></a>    <span class="fu">mutate</span>(</span>
<span id="cb43-33"><a></a>      <span class="at">trial_type =</span> <span class="fu">ifelse</span>(type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"threat"</span>, <span class="st">"safety"</span>, <span class="st">"amb1"</span>, <span class="st">"amb2"</span>), <span class="st">"sc"</span>, <span class="st">"mc"</span>),</span>
<span id="cb43-34"><a></a>      <span class="at">shock1 =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-35"><a></a>        CS_type1 <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"shock"</span>, </span>
<span id="cb43-36"><a></a>        CS_type1 <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"noshock"</span>,</span>
<span id="cb43-37"><a></a>        CS_type1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"amb1"</span>, <span class="st">"amb2"</span>) <span class="sc">~</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"shock"</span>,<span class="st">"noshock"</span>), <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>,.<span class="dv">5</span>))),</span>
<span id="cb43-38"><a></a>      <span class="at">shock2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-39"><a></a>        CS_type2 <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"shock"</span>, </span>
<span id="cb43-40"><a></a>        CS_type2 <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"noshock"</span>,</span>
<span id="cb43-41"><a></a>        CS_type2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"amb1"</span>, <span class="st">"amb2"</span>) <span class="sc">~</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"shock"</span>,<span class="st">"noshock"</span>), <span class="dv">1</span>)),</span>
<span id="cb43-42"><a></a>      </span>
<span id="cb43-43"><a></a>      <span class="at">shock =</span> <span class="fu">coalesce</span>(shock2, shock1)) <span class="sc">%&gt;%</span> <span class="co"># uses "shock2" unless there's NA, then shock1</span></span>
<span id="cb43-44"><a></a>    </span>
<span id="cb43-45"><a></a>    <span class="fu">mutate</span>(<span class="at">combi3 =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(combi2), <span class="cn">NA</span>, <span class="fu">str_c</span>(stim_shape, stim_col2, <span class="at">sep =</span> <span class="st">"_"</span>)),</span>
<span id="cb43-46"><a></a>           <span class="at">combi4 =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(combi2), <span class="cn">NA</span>, <span class="fu">str_c</span>(stim_shape2, stim_col, <span class="at">sep =</span> <span class="st">"_"</span>)),</span>
<span id="cb43-47"><a></a>           <span class="at">allcombisshuffled =</span> <span class="fu">str_c</span>(<span class="fu">sample</span>(<span class="fu">c</span>(combi, combi2, combi3, combi4)), <span class="at">collapse =</span> <span class="st">";"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-48"><a></a>    <span class="fu">separate_wider_delim</span>(allcombisshuffled, <span class="at">delim =</span> <span class="st">";"</span>, <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"combi5"</span>, <span class="st">"combi6"</span>, <span class="st">"combi7"</span>, <span class="st">"combi8"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-49"><a></a>    </span>
<span id="cb43-50"><a></a>    <span class="co"># clean up (remove unnecessary columns, reorder)</span></span>
<span id="cb43-51"><a></a>    <span class="fu">select</span>(ID, block, trial, trial_type, shock, <span class="at">CS_type =</span> type, CS_type1, CS_type2, combi, combi2, combi3, combi4, combi5, combi6, combi7, combi8) </span>
<span id="cb43-52"><a></a>    </span>
<span id="cb43-53"><a></a>    <span class="co"># save for each participant</span></span>
<span id="cb43-54"><a></a>    <span class="fu">write_csv</span>(triallist, <span class="fu">paste0</span>(<span class="st">"Triallist_"</span>, <span class="fu">as.character</span>(s), <span class="st">".csv"</span>))</span>
<span id="cb43-55"><a></a>  </span>
<span id="cb43-56"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="block-2" class="slide level2">
<h2>Block 2</h2>
<p>The last step for Ecem’s design would be to generate the stimuli for the second block!</p>
<p>In this block, the threat and safety stimuli should become ambiguous stimuli, and amb1 and amb2 should become threat and safety (though it should be random which becomes which - or does it even matter? The participants don’t know which ambiguous stimulus is amb1?).</p>
<p>We’ll do the easy solution for now and simply swap threat with amb1, and safety with amb2. We’ll go back to the original stimulus list to add this information:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>overall_stimlist <span class="ot">&lt;-</span> overall_stimlist <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a></a>  <span class="fu">mutate</span>(<span class="at">CS_type_block2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-3"><a></a>    CS_type <span class="sc">==</span> <span class="st">"threat"</span> <span class="sc">~</span> <span class="st">"amb1"</span>,</span>
<span id="cb44-4"><a></a>    CS_type <span class="sc">==</span> <span class="st">"safety"</span> <span class="sc">~</span> <span class="st">"amb2"</span>,</span>
<span id="cb44-5"><a></a>    CS_type <span class="sc">==</span> <span class="st">"amb1"</span> <span class="sc">~</span> <span class="st">"threat"</span>,</span>
<span id="cb44-6"><a></a>    CS_type <span class="sc">==</span> <span class="st">"amb2"</span> <span class="sc">~</span> <span class="st">"safety"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can bring this in a longer format, so that we can simply run the code (with minor adjustments) from above for all trials (but we could also run it twice and change the column from CS_type to CS_type_block2):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a>overall_stimlist2 <span class="ot">&lt;-</span> overall_stimlist <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"CS_type"</span>),</span>
<span id="cb45-3"><a></a>               <span class="at">names_to =</span> <span class="st">"block"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>